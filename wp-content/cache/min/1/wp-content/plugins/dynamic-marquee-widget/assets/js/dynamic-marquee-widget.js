document.addEventListener("DOMContentLoaded",function(){initializeMarquees();if(window.elementorFrontend){if(window.elementorFrontend.hooks){window.elementorFrontend.hooks.addAction('frontend/element_ready/dynamic_marquee_widget.default',function(){initializeMarquees()})}}});function initializeMarquees(){const carrosseis=document.querySelectorAll('.carrossel:not(.initialized)');carrosseis.forEach(function(carrossel){carrossel.classList.add('initialized');const isEditor=carrossel.getAttribute('data-is-elementor-edit')==='true';const listaItens=carrossel.querySelector('.elementor-icon-list-items');if(listaItens){const conteudoOriginal=listaItens.innerHTML;const carrosselContainer=document.createElement('div');carrosselContainer.classList.add('carrossel-ativo');const duracao=parseFloat(carrossel.getAttribute('data-duration'))||20;carrosselContainer.style.animationDuration=duracao+'s';carrosselContainer.innerHTML=conteudoOriginal;listaItens.innerHTML='';listaItens.appendChild(carrosselContainer);const larguraContainer=carrossel.offsetWidth;let larguraConteudo=0;const itens=carrosselContainer.querySelectorAll('li');itens.forEach(item=>{larguraConteudo+=item.offsetWidth+parseInt(window.getComputedStyle(item).marginRight)});const copias=Math.ceil((larguraContainer*2)/larguraConteudo)+1;let novoConteudo=conteudoOriginal;for(let i=1;i<copias;i++){novoConteudo+=conteudoOriginal}
carrosselContainer.innerHTML=novoConteudo;if(carrossel.classList.contains('enable-drag')){setupDraggable(carrossel,carrosselContainer)}}})}
function setupDraggable(carrossel,container){let isDragging=!1;let startPositionX=0;let startScrollLeft=0;let currentTransform=0;let animationDirection=carrossel.getAttribute('data-direction')==='right'?1:-1;container.addEventListener('mousedown',startDragging);document.addEventListener('mouseleave',stopDragging);document.addEventListener('mouseup',stopDragging);document.addEventListener('mousemove',dragMarquee);container.addEventListener('touchstart',startDragging);document.addEventListener('touchend',stopDragging);document.addEventListener('touchcancel',stopDragging);document.addEventListener('touchmove',dragMarquee);function startDragging(e){isDragging=!0;container.classList.add('dragging');if(e.type==='touchstart'){startPositionX=e.touches[0].clientX}else{startPositionX=e.clientX;e.preventDefault()}
const computedStyle=window.getComputedStyle(container);const transform=computedStyle.getPropertyValue('transform');if(transform&&transform!=='none'){const matrix=new DOMMatrix(transform);currentTransform=matrix.m41}else{currentTransform=0}
startScrollLeft=currentTransform}
function stopDragging(){if(!isDragging)return;isDragging=!1;container.classList.remove('dragging');container.style.transform=''}
function dragMarquee(e){if(!isDragging)return;e.preventDefault();let currentPosition;if(e.type==='touchmove'){currentPosition=e.touches[0].clientX}else{currentPosition=e.clientX}
const diff=currentPosition-startPositionX;container.style.transform=`translateX(${startScrollLeft + diff}px)`}
container.addEventListener('dragstart',function(e){e.preventDefault()})}